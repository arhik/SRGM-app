import {customElement, inject, bindable, TaskQueue} from 'aurelia-framework';
import {EventAggregator} from "aurelia-event-aggregator";
import Plotly from 'plotly.js' //It is an issue for now: https://github.com/plotly/plotly.js/issues/22 
// import OriginData from './original_data';
import $ from "jquery";
@customElement('plottest3d')
@inject(EventAggregator, TaskQueue)
export class Plotest3D{
	@bindable plotlydiv3d;
	constructor(eventAggregator, taskQueue){
		this.eventAggregator = eventAggregator;
		this.taskQueue = taskQueue;
		this.plotData = {};
	}

	attached(){
		var layout = {
		  title: 'Log Likelihood Plot',
		  // autosize: true,
		  width: 500,
		  height: 400,
		  margin: {
		    l: 50,
		    r: 50,
		    b: 50,
		    t: 50
		  }
		};
		// var data = [{'y': [401.0865040610144, 401.0799777331211, 401.07345140522784, 401.06692507733453, 401.0603987494413, 401.05387242154796, 401.0473460936547, 401.0408197657614, 401.03429343786814, 401.02776710997483], 'x': [4.212037168845223e-05, 4.213494179070743e-05, 4.2149511892962635e-05, 4.216408199521783e-05, 4.217865209747303e-05, 4.2193222199728236e-05, 4.220779230198344e-05, 4.2222362404238634e-05, 4.223693250649384e-05, 4.225150260874904e-05], 'z': [[-1620.0784048894502, -1619.9411000762507, -1619.8038427343304, -1619.6666328308752, -1619.5294703331065, -1619.3923552082779, -1619.2552874236767, -1619.1182669466261, -1618.9812937444813, -1618.8443677846321], [-1620.0848647758512, -1619.9475599626517, -1619.8103026207314, -1619.6730927172762, -1619.5359302195075, -1619.3988150946789, -1619.2617473100777, -1619.1247268330271, -1618.9877536308823, -1618.8508276710331], [-1620.091324767368, -1619.9540199541684, -1619.816762612248, -1619.679552708793, -1619.5423902110242, -1619.4052750861956, -1619.2682073015944, -1619.1311868245439, -1618.994213622399, -1618.8572876625499], [-1620.0977848640036, -1619.960480050804, -1619.8232227088838, -1619.6860128054286, -1619.54885030766, -1619.4117351828313, -1619.2746673982301, -1619.1376469211796, -1619.0006737190347, -1618.8637477591856], [-1620.1042450657615, -1619.966940252562, -1619.8296829106416, -1619.6924730071864, -1619.5553105094177, -1619.4181953845891, -1619.281127599988, -1619.1441071229374, -1619.0071339207925, -1618.8702079609434], [-1620.110705372645, -1619.9734005594455, -1619.8361432175252, -1619.69893331407, -1619.5617708163013, -1619.4246556914727, -1619.2875879068715, -1619.150567429821, -1619.013594227676, -1618.876668267827], [-1620.1171657846576, -1619.979860971458, -1619.8426036295377, -1619.7053937260825, -1619.5682312283138, -1619.4311161034852, -1619.294048318884, -1619.1570278418335, -1619.0200546396886, -1618.8831286798395], [-1620.1236263018027, -1619.9863214886032, -1619.8490641466828, -1619.7118542432277, -1619.574691745459, -1619.4375766206304, -1619.3005088360292, -1619.1634883589786, -1619.0265151568337, -1618.8895891969846], [-1620.1300869240836, -1619.992782110884, -1619.8555247689637, -1619.7183148655085, -1619.5811523677398, -1619.4440372429112, -1619.30696945831, -1619.1699489812595, -1619.0329757791146, -1618.8960498192655], [-1620.1365476515039, -1619.9992428383043, -1619.861985496384, -1619.7247755929288, -1619.5876130951601, -1619.4504979703315, -1619.3134301857303, -1619.1764097086798, -1619.039436506535, -1618.9025105466858]], 'type': 'contour'}]
		// Plotly.newPlot(this.plotlydiv3d,data)
		this.eventAggregator.subscribe('plotData', plotdata => {
														this.plotData= plotdata; 
														console.log(this);
														// console.log(Plotly);
														console.log(this.plotData);
														Plotly.newPlot(this.plotlydiv3d, this.plotData.plotlyContour3D, layout);
														
													});

		// Plotly.newPlot(this.plotlydiv3d, [newTrace]);
	}

	
} 